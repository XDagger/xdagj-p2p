<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <!-- Console appender for real-time monitoring -->
    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- File appender for detailed logs -->
    <appender name="FILE" class="ch.qos.logback.core.FileAppender">
        <file>logs/discovery.log</file>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- Kademlia DHT discovery - DEBUG level for detailed node discovery tracking -->
    <logger name="io.xdag.p2p.discover.kad.KadService" level="DEBUG"/>
    <logger name="io.xdag.p2p.discover.kad.NodeHandler" level="DEBUG"/>
    <logger name="io.xdag.p2p.discover.kad.DiscoverTask" level="DEBUG"/>
    <logger name="io.xdag.p2p.discover.kad.table.NodeTable" level="DEBUG"/>

    <!-- UDP discovery handler -->
    <logger name="io.xdag.p2p.handler.discover" level="DEBUG"/>

    <!-- Node management -->
    <logger name="io.xdag.p2p.discover.NodeManager" level="INFO"/>

    <!-- Channel and connection management - INFO level to track connections -->
    <logger name="io.xdag.p2p.channel.ChannelManager" level="INFO"/>
    <logger name="io.xdag.p2p.channel.HandshakeHandler" level="INFO"/>

    <!-- Discovery application logger -->
    <logger name="discovery" level="INFO"/>

    <!-- Application logger -->
    <logger name="app" level="INFO"/>

    <!-- Network logger (reduce noise) -->
    <logger name="net" level="INFO"/>

    <!-- Example handlers (quiet for discovery testing) -->
    <logger name="example" level="WARN"/>

    <!-- Netty framework (reduce noise) -->
    <logger name="io.netty" level="WARN"/>

    <!-- Root logger -->
    <root level="INFO">
        <appender-ref ref="STDOUT"/>
    </root>
</configuration>
